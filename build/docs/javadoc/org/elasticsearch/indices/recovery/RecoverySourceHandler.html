<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_40) on Thu Mar 31 00:57:37 PDT 2016 -->
<title>RecoverySourceHandler (core 3.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-03-31">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RecoverySourceHandler (core 3.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/elasticsearch/indices/recovery/RecoverySource.Actions.html" title="class in org.elasticsearch.indices.recovery"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/elasticsearch/indices/recovery/RecoveryState.html" title="class in org.elasticsearch.indices.recovery"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/elasticsearch/indices/recovery/RecoverySourceHandler.html" target="_top">Frames</a></li>
<li><a href="RecoverySourceHandler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.elasticsearch.indices.recovery</div>
<h2 title="Class RecoverySourceHandler" class="title">Class RecoverySourceHandler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.elasticsearch.indices.recovery.RecoverySourceHandler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../org/elasticsearch/indices/recovery/SharedFSRecoverySourceHandler.html" title="class in org.elasticsearch.indices.recovery">SharedFSRecoverySourceHandler</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">RecoverySourceHandler</span>
extends java.lang.Object</pre>
<div class="block">RecoverySourceHandler handles the three phases of shard recovery, which is
 everything relating to copying the segment files as well as sending translog
 operations across the wire once the segments have been copied.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../org/elasticsearch/common/logging/ESLogger.html" title="interface in org.elasticsearch.common.logging">ESLogger</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#logger">logger</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected org.elasticsearch.indices.recovery.RecoveryResponse</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#response">response</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#RecoverySourceHandler-org.elasticsearch.index.shard.IndexShard-org.elasticsearch.indices.recovery.StartRecoveryRequest-org.elasticsearch.indices.recovery.RecoverySettings-org.elasticsearch.transport.TransportService-org.elasticsearch.common.logging.ESLogger-">RecoverySourceHandler</a></span>(<a href="../../../../org/elasticsearch/index/shard/IndexShard.html" title="class in org.elasticsearch.index.shard">IndexShard</a>&nbsp;shard,
                     <a href="../../../../org/elasticsearch/indices/recovery/StartRecoveryRequest.html" title="class in org.elasticsearch.indices.recovery">StartRecoveryRequest</a>&nbsp;request,
                     <a href="../../../../org/elasticsearch/indices/recovery/RecoverySettings.html" title="class in org.elasticsearch.indices.recovery">RecoverySettings</a>&nbsp;recoverySettings,
                     <a href="../../../../org/elasticsearch/transport/TransportService.html" title="class in org.elasticsearch.transport">TransportService</a>&nbsp;transportService,
                     <a href="../../../../org/elasticsearch/common/logging/ESLogger.html" title="interface in org.elasticsearch.common.logging">ESLogger</a>&nbsp;logger)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#cancel-java.lang.String-">cancel</a></span>(java.lang.String&nbsp;reason)</code>
<div class="block">Cancels the recovery and interrupts all eligible threads.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#failEngine-java.io.IOException-">failEngine</a></span>(java.io.IOException&nbsp;cause)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#finalizeRecovery--">finalizeRecovery</a></span>()</code>
<div class="block">finalizes the recovery process</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#phase1-org.apache.lucene.index.IndexCommit-org.elasticsearch.index.translog.Translog.View-">phase1</a></span>(org.apache.lucene.index.IndexCommit&nbsp;snapshot,
      <a href="../../../../org/elasticsearch/index/translog/Translog.View.html" title="class in org.elasticsearch.index.translog">Translog.View</a>&nbsp;translogView)</code>
<div class="block">Perform phase1 of the recovery operations.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#phase2-org.elasticsearch.index.translog.Translog.Snapshot-">phase2</a></span>(<a href="../../../../org/elasticsearch/index/translog/Translog.Snapshot.html" title="interface in org.elasticsearch.index.translog">Translog.Snapshot</a>&nbsp;snapshot)</code>
<div class="block">Perform phase2 of the recovery process</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#prepareTargetForTranslog-org.elasticsearch.index.translog.Translog.View-">prepareTargetForTranslog</a></span>(<a href="../../../../org/elasticsearch/index/translog/Translog.View.html" title="class in org.elasticsearch.index.translog">Translog.View</a>&nbsp;translogView)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>org.elasticsearch.indices.recovery.RecoveryResponse</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#recoverToTarget--">recoverToTarget</a></span>()</code>
<div class="block">performs the recovery from the local engine to the target</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#sendSnapshot-org.elasticsearch.index.translog.Translog.Snapshot-">sendSnapshot</a></span>(<a href="../../../../org/elasticsearch/index/translog/Translog.Snapshot.html" title="interface in org.elasticsearch.index.translog">Translog.Snapshot</a>&nbsp;snapshot)</code>
<div class="block">Send the given snapshot's operations to this handler's target node.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>protected final&nbsp;<a href="../../../../org/elasticsearch/common/logging/ESLogger.html" title="interface in org.elasticsearch.common.logging">ESLogger</a> logger</pre>
</li>
</ul>
<a name="response">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>response</h4>
<pre>protected final&nbsp;org.elasticsearch.indices.recovery.RecoveryResponse response</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RecoverySourceHandler-org.elasticsearch.index.shard.IndexShard-org.elasticsearch.indices.recovery.StartRecoveryRequest-org.elasticsearch.indices.recovery.RecoverySettings-org.elasticsearch.transport.TransportService-org.elasticsearch.common.logging.ESLogger-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RecoverySourceHandler</h4>
<pre>public&nbsp;RecoverySourceHandler(<a href="../../../../org/elasticsearch/index/shard/IndexShard.html" title="class in org.elasticsearch.index.shard">IndexShard</a>&nbsp;shard,
                             <a href="../../../../org/elasticsearch/indices/recovery/StartRecoveryRequest.html" title="class in org.elasticsearch.indices.recovery">StartRecoveryRequest</a>&nbsp;request,
                             <a href="../../../../org/elasticsearch/indices/recovery/RecoverySettings.html" title="class in org.elasticsearch.indices.recovery">RecoverySettings</a>&nbsp;recoverySettings,
                             <a href="../../../../org/elasticsearch/transport/TransportService.html" title="class in org.elasticsearch.transport">TransportService</a>&nbsp;transportService,
                             <a href="../../../../org/elasticsearch/common/logging/ESLogger.html" title="interface in org.elasticsearch.common.logging">ESLogger</a>&nbsp;logger)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="recoverToTarget--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoverToTarget</h4>
<pre>public&nbsp;org.elasticsearch.indices.recovery.RecoveryResponse&nbsp;recoverToTarget()</pre>
<div class="block">performs the recovery from the local engine to the target</div>
</li>
</ul>
<a name="phase1-org.apache.lucene.index.IndexCommit-org.elasticsearch.index.translog.Translog.View-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>phase1</h4>
<pre>public&nbsp;void&nbsp;phase1(org.apache.lucene.index.IndexCommit&nbsp;snapshot,
                   <a href="../../../../org/elasticsearch/index/translog/Translog.View.html" title="class in org.elasticsearch.index.translog">Translog.View</a>&nbsp;translogView)</pre>
<div class="block">Perform phase1 of the recovery operations. Once this <code>IndexCommit</code>
 snapshot has been performed no commit operations (files being fsync'd)
 are effectively allowed on this index until all recovery phases are done
 <p>
 Phase1 examines the segment files on the target node and copies over the
 segments that are missing. Only segments that have the same size and
 checksum can be reused</div>
</li>
</ul>
<a name="prepareTargetForTranslog-org.elasticsearch.index.translog.Translog.View-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareTargetForTranslog</h4>
<pre>protected&nbsp;void&nbsp;prepareTargetForTranslog(<a href="../../../../org/elasticsearch/index/translog/Translog.View.html" title="class in org.elasticsearch.index.translog">Translog.View</a>&nbsp;translogView)</pre>
</li>
</ul>
<a name="phase2-org.elasticsearch.index.translog.Translog.Snapshot-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>phase2</h4>
<pre>public&nbsp;void&nbsp;phase2(<a href="../../../../org/elasticsearch/index/translog/Translog.Snapshot.html" title="interface in org.elasticsearch.index.translog">Translog.Snapshot</a>&nbsp;snapshot)</pre>
<div class="block">Perform phase2 of the recovery process
 <p>
 Phase2 takes a snapshot of the current translog *without* acquiring the
 write lock (however, the translog snapshot is a point-in-time view of
 the translog). It then sends each translog operation to the target node
 so it can be replayed into the new shard.</div>
</li>
</ul>
<a name="finalizeRecovery--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeRecovery</h4>
<pre>public&nbsp;void&nbsp;finalizeRecovery()</pre>
<div class="block">finalizes the recovery process</div>
</li>
</ul>
<a name="sendSnapshot-org.elasticsearch.index.translog.Translog.Snapshot-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendSnapshot</h4>
<pre>protected&nbsp;int&nbsp;sendSnapshot(<a href="../../../../org/elasticsearch/index/translog/Translog.Snapshot.html" title="interface in org.elasticsearch.index.translog">Translog.Snapshot</a>&nbsp;snapshot)</pre>
<div class="block">Send the given snapshot's operations to this handler's target node.
 <p>
 Operations are bulked into a single request depending on an operation
 count limit or size-in-bytes limit</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the total number of translog operations that were sent</dd>
</dl>
</li>
</ul>
<a name="cancel-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancel</h4>
<pre>public&nbsp;void&nbsp;cancel(java.lang.String&nbsp;reason)</pre>
<div class="block">Cancels the recovery and interrupts all eligible threads.</div>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="failEngine-java.io.IOException-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>failEngine</h4>
<pre>protected&nbsp;void&nbsp;failEngine(java.io.IOException&nbsp;cause)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/elasticsearch/indices/recovery/RecoverySource.Actions.html" title="class in org.elasticsearch.indices.recovery"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/elasticsearch/indices/recovery/RecoveryState.html" title="class in org.elasticsearch.indices.recovery"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/elasticsearch/indices/recovery/RecoverySourceHandler.html" target="_top">Frames</a></li>
<li><a href="RecoverySourceHandler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
